workflows:
  snapcraft-release:
    name: Snapcraft Release
    instance_type: linux
    environment:
      vars:
        SNAPCRAFT_LOGIN_CREDENTIALS: Encrypted(Z0FBQUFBQmdjX2RxYUxHc2JtTUVRcFhMRjdURFNJb0VFNHlKb3h5QmlyX2Z0LUptaFBlTlNmNXZFS3lWd2dLUHBLQ1A2Yl93Ung0Xy1qeVZkcXQ5V0pZclZnTXo4cmFtM3NfYVN6aXg5VGVQNXlWNVg0bEs1OHBpRlNOaGRkQ1hfQVdKRm5iRi1sV0xob1RfZzhJUTZQNUpTVXcwZjVOU1NWR2ttQlN0ajd3QjFxV24tODN6RExHd1ZzLXFDb3hQT2NDUnE0SFYxWkZBZEU3dzVCb0xRTG53dlhnMVRDUC11NXRvU2dFemVnMWsta1VFTC1SUG9Da0wyY2N3bTdFSVBaaWVZVGtSaGo2bkNKNF9XdFFFMlcxYXZHOHBXNHVOZ25QRFB1V0lRYkZvamFTY2lDeDVEOVhCcTdFVm9JZEVnVnNfU0J6REVaS2M5Q0wzTTh1NXdqZXdiSGgzNzQ0RDBPMnpTMUdkV21ua1lSSHpBbjNLU0s0NmFQZ3Y0TmQ2LXQ2VkF0cTc0WHR1NElPT3oxeW1lWU1DVmRmcHc3V3FaTmVSWHFTQW44cnl3UUxJMndsU01ZZExCT2h1ZkZ2S0hGQmtCbV84YXRWdEtYUzYwX3Rvb21HZmhVX3pWQzFDbGNOZXdySW4zdHMxeU1SNTFqdlh0MG92cWUtN0NtQkMxY1ZLVnV1RmJXT1BRbklHWlpfQll1cV96TGVXQ05HQjQ0czFVYWFrY0djdUF3RmZmOVBLT3JBZDFsUVpiWS1FZG9CZVVteWRybVk3V3NWYkY0YVhIY01GVG9CQ0JjQUFNbnp6dDhCYWQxOEZwc0xfckNhaXY0Snl4NU5tU3VxdzRmSGtmU0Fyb2h4czZ1aWVTWDFxcHFjWWNxdnhSYnpxdkpvdHE1c1pza0RBN3VPdFhyVFAxYWFIMGtfSS1RWjZoTnc5Ym91aFcxOTlGT3NvRWNiZHlqcEhJT1otUXh3NW1XQ2ZPRS10LUZmU3BRSTlvNDg5WXNldHJRWmFjOU8zbFFPcTVaNjB5NlFPeklpanF4S2loeURPUHNPdW16RWxPMkhGaUM3VDhRdFNPbEhwcUVEODJHRGdITTlZT1VYTVV1WVNCZ3oySm45eUNLcUNlVDJ6LVl2UTVRblhYU3hiekNFSFNaM05YbWZNcGtIeVdyQnVaSFMyZnBqSlVhUVdaMVFyTldrR2hXejZuRWtxd3RoZ29VUWN4QTVKRGE1Nk14enAyNWlXWUNGc3VwMF9PTnEtR3FrTWJzZlhlZEYxYUZyV2Jwc0VUYUVxeHo5WXVMOUg1WVhOWjVOR1lmdVpHd2k4T3NpakJSUUhrTmwwRlRsc2RrMzBLRHlEY2ZoR0hUSDNZcEJpZ1BrR1UtcTJFMkRLQ1NWQlJhSFNiako3SHJxdjlCNnFXVGlJbEVnSWtVZ19kT0NvbnY3N3dFZVg1bDB3cXZDaVB4WEJpLU5qZWVoMEhUeDE0UzI1cHNqbUxpMGNDS3JTbHpNSm5aenJiVi1PRGp0WnJWYW9Ec2dhWl9SMWlTdW5oSUVpS1lqWlRqd0ZfOWQ1ZUZMQ3NxVEI5S0FzQ3N6NDVmMmNMYzBzdGUzTENQeXBzTTA5NDdPTkxIczJDUmt3eWZua01MV0RSYm5IanhXNFZBU25vM0Zud1lBeS1vMkhfelVqcVY3aUdvYW94QUd5Wm1XckJQUk13Um5fWUNtMnk3dzAyOGtIUlZNSG1FZGdvWTZ0WjJ1UndUeXc5SjRueE9ud19jSFZ0aGl2dExfMGJfZW5TOUpFWWJGTmZiZUZFTVJPeVBxcW5xWXFGa3luNW1mYksxQXZBYUNvT3R3c1dZWkdWdnlZeEpPU2pHX3lXdUhWd1hZazNUVjBIWl9kWW81V0dWb1VtWG5TNEZ5RDdMTUQ0Y0hCcWVkRVdLZFVWend5Si1wODduWEh4UzJWcE1YZjQ4S1NYYUl0OXB5Rk5MRGhsOVZVY1V4Zkd0NUI4aFJDSTcwN1lGQV9md2h5Uy01TWk3Um9oeDd0QnhzSnJGWEZJb05kNzlzdFdlM3IxSlA0NzcxSklkbTZzWThHaktiVy00cVd4dnZOcW5MM0FYdi11NDl4azYxR0NoeFFWMjhORklhY21Qd0tqb3lkRnFfc0NlSzBmNHVISlhwODEyNmsyZUx1Nzh5QWo0c1pUS0k0dkM3eFFhSkxzbk1tMERxRUVFcEtmb1RSRlhLdTd0WXVmTkMxMWZvMTBiQk9WSUZEYVJWWVdzZkdvaUJobThSSGJFN2lac2hwLXpuU3pLTHdpU1NqYmYwM0swWHZJaXNKa1l3aEdiczZUTmZiQnpLN0hNODgyM25hMy1tWWpOZVoxVEhRVXd5X2N6Ym9iM2xZazRNdE9pWHBZSjJaM1cteVFOaEpHOVNiUG9yWHh3Z3RxVUNNSzN1YVVIazZuTUFvWDZ1cFFLVUJTbmVOdWtLQkU5aXluTDJzcXNPdGVNcDZYdFlkay14dGw3TWU5czVuM2QxYWhzUTBRM1NxaVloOThXaXdFWEt3VnJZNk90R0x2ZV8yR0owQ2hEYVBwekF3LVY5Ym92NkJnbVRncXBZUDVyODNWZHlYRzlob3VSMnlyelI4R0praE1qWmd0N2hsRXFFOEJsa1ZSdmNXWk9jSF9ScnVDMEpSRUxwUzNCZ1hKTENPbDh2aUlUb0xmWkdGa0hTZ2ZCN0dkLWdjT1M4SG5GTFFKQjA5QXEwcEE0VGp6Z01fb3JESnByMGphZUpjVnQ5WGhmRXI4WXh1dDh5UmdCajlHUXk0M0FVSEVxS2t3NlRKdHU3MG1MdDFNRVUyWUNCUHJvN1pOazQ2ZTk4bEJOemNpWjRWWjdqV2VQSGhXcUQ4dzNHdzBpbHBUUE1pODlvS3JoQmE2bGxJeklnQWhPVWpva19VSEVyS3h0ZVUtaGhqOE5fdGlqcUwtaGVVdXdFZXVWcDBfQVhUejVScE9kOUpkeVBJR2tzS2JyOVpGRkxrN3RxU3ktU0JIZ2J0Tml0XzZfNXI0YlV6cFFTSXhXQVA0QnVia3B5YlNqbDl2VkNodjZmal9TeWpsQkFvbDl2YU42STViNlZoT3JyTEVTR0xQQmVCTzJXMzlBaTBmTmhzcVk0YjhDZVdwOVZQT3J6QUxxWms0NWdidHZuSGNmYVdULXFuODd3ZUplMzJzRGRZUGVKbWNBSTQzVlV2SERMREZUbDE1VTFQb3lwZ3BSSWdNb0Z2VjZ2T2NLSkF1WTRhYnd4MjhNaTQyUkp5c216U0lsRmxBVl81bmQ0LUpoQkE3NjF1cTdjLWJOVUVLbkhSMkw4ckNZS3ZRakxRQmhCSWVsWTF2M1owZlZMTWQtcFB4bTVCVHNtOHhpekI3dkJQN0lGVUk1MkhWbXNzT2VibnY0b2trcnk5VGFJZkJJYXpjTjgwVy0tVDNEeFVXWXIzeDE1NFdjWk9fNWNSUnVZLUV6S0xGZTRpTWlQT2xzYVNSVURXeEF5TGdoUm5kUHdwbEktYXZpblg1bm9abmp5eXQ3WjN3aDhIODZNSHNwRkFGa2xRVmYyYTF5QVlRNUd5eXBQS0puX2ZZZklyeXZ0UXBfNUZZWklBeHc4UmhJcFdGem1vcTJPM1pqSV84d256RkN2MGdHekpsRUlSVkoxVTB5X1VqVjN4bV9lT09oYUswVklSUmRYT19nRnp1ZzFhYlFkUzU3X21BcENTZEszeWQxUk9iMXBiT3NLeF8zdzFIcDlmaFU2Sjh4TU1TM3FNdWNFYjJLX2JNbXljMzRDemJmMEV5VXBPaEpCMjVmMjExU2czNlhtZ1lDcVlKeUhNc0xmeDU1d2doZVZMX1ZsaWV5cGF0eEZjdHN2cUhMWFl5amtlbC12SEpZZFJjeUVlX3R6bW9oXzM1RHd0V1FJWC00UWtpTzlPWFVBNVFKMVJ3WEh5Q05idmhIWDlkUHMwNFdMSThUSHVBNGFnTUhzT2JDamhSaUNiSXhmblFoV1lkYjV1Umd4UlNYNFRaX2liMTFrWG9nV3hiejd4dW55ejhLUFA1M3JiN0FvNnk3dXZXVzFlYVdrYjNqbDFHellmOWhhY2R3VXhremV1Sm5LSkNEZkxCRkVfZjZNVllIbGVPbGhGSllnTlJUaHJBdjl2WHlkaTRFTXlzdERQdF9nSTI0a3NqTmZhSzF1UEpZYnU2cEZrOXc4QUd5ZXpfeUdYdXE4T05BZllPSnZvYkVtcU5aV0ZLRXQyUWRHYkVIM05zMzJ0Y29KbEdhV1cwaUVMb1c5a2pIYkFOeEp5WGpLMjUxSExPTG1Qc193UXkwRXctNjhEaVRCeVZvZ3JqTkZTQTBvYTRJZEdCLWtpSkxQZVBuclNHRFdtRTBYdFdsZHNwUT09) 
    scripts:
      - yes | sudo apt install golang-go
      - sudo snap install snapcraft --classic
      - snapcraft snap --output codemagic-snapcraft-example.snap
      - echo $SNAPCRAFT_LOGIN_CREDENTIALS > snapcraft-login-credentials
      - snapcraft login --with snapcraft-login-credentials
      - snapcraft register codemagic-snapcraft-example
      - snapcraft push codemagic-snapcraft-example.snap
      - snapcraft release codemagic-snapcraft-example 1 stable
